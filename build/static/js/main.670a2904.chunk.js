(this["webpackJsonpcheck-in"]=this["webpackJsonpcheck-in"]||[]).push([[0],{104:function(e,t,n){e.exports={Button:"Button_Button__2OPL1",TextButton:"Button_TextButton__27cAm",ButtonNotValid:"Button_ButtonNotValid__2byBy"}},105:function(e,t,n){e.exports={SearchBar:"SearchBar_SearchBar__2bXGH",Input:"SearchBar_Input__2yG7Z"}},163:function(e,t,n){e.exports={Main:"Layout_Main__Xdh42"}},165:function(e,t,n){e.exports={Backdrop:"Backdrop_Backdrop__2ywrF"}},168:function(e,t,n){e.exports={SearchBarContainer:"Users_SearchBarContainer__18DBO"}},169:function(e,t,n){e.exports={TopContainer:"UserInfo_TopContainer__2CJC3",GoBack:"UserInfo_GoBack__gNHry",Loader:"UserInfo_Loader__1N_9j"}},17:function(e,t,n){e.exports={Sidebar:"Sidebar_Sidebar__12SDu",ItemsContainer:"Sidebar_ItemsContainer__1VCeI",TextDiv:"Sidebar_TextDiv__3j4B5",ItemDiv:"Sidebar_ItemDiv__3f0Tm",Text:"Sidebar_Text__1qeR2",TextSelected:"Sidebar_TextSelected__Caci2",Selected:"Sidebar_Selected__2DCG_",activeBar:"Sidebar_activeBar__2TX8C",Logout:"Sidebar_Logout__3ZxEQ",LogoutText:"Sidebar_LogoutText__1D21C",LogoContainer:"Sidebar_LogoContainer__2fW4K",Logo:"Sidebar_Logo__3IWQk"}},178:function(e,t,n){},220:function(e,t){},222:function(e,t){},233:function(e,t){},235:function(e,t){},262:function(e,t){},264:function(e,t){},265:function(e,t){},271:function(e,t){},273:function(e,t){},291:function(e,t){},293:function(e,t){},30:function(e,t,n){e.exports={Login:"Login_Login__29TOc",Form:"Login_Form__1_eAP",ButtonContainer:"Login_ButtonContainer__2CAPH",Button:"Login_Button__1B49S",TextButton:"Login_TextButton__1w_c6",ButtonNotActive:"Login_ButtonNotActive__1wzbw",Error:"Login_Error__18FjM",LoaderContainer:"Login_LoaderContainer__2IWNv"}},305:function(e,t){},308:function(e,t){},31:function(e,t,n){e.exports={Signup:"Signup_Signup__3Zpuf",Form:"Signup_Form__2l55v",ButtonContainer:"Signup_ButtonContainer__P8Wn5",Button:"Signup_Button__2Zvvo",TextButton:"Signup_TextButton__IgWwe",ButtonNotActive:"Signup_ButtonNotActive__2rNSI",Error:"Signup_Error__3_8Xv",LoaderContainer:"Signup_LoaderContainer__C3Y-e"}},318:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(2),i=n.n(c),r=n(61),o=n.n(r),s=(n(178),n(8)),l=n(7),d=n(14),u=n.n(d),j=n(29),h=n(52);n(184),n(186);h.a.initializeApp({apiKey:"AIzaSyAv773xEN_r3_yYHppzrcwA601d_kYGffI",authDomain:"checkin-e8bea.firebaseapp.com",databaseURL:"https://checkin-e8bea.firebaseio.com",projectId:"checkin-e8bea",storageBucket:"checkin-e8bea.appspot.com",messagingSenderId:"683436459496",appId:"1:683436459496:web:6d2225d9844286bb46905d",measurementId:"G-D8V9MBGRDJ"});var b=h.a.firestore(),m=h.a.auth(),O="LOGIN",x="SIGNUP",p="SIGNOUT",_="PUSHINFO",f="SET_NAME",v="ERROR",g="LOADING",C=function(e){var t=e;return e&&(t=e.toString()),function(e){e({type:v,errorMSG:t})}},S=function(e){return function(t){t({type:g,isLoading:e})}},N=n(12),k=n.p+"static/media/logo.4f91f8b6.png",I=n(17),B=n.n(I),w=n(25),T=function(){var e=Object(c.useState)(null),t=Object(s.a)(e,2),n=t[0],i=t[1],r=Object(N.g)(),o=Object(l.b)(),d=Object(c.useCallback)((function(e){"/home"===e?i(0):e.includes("/sites")?i(1):e.includes("/users")?i(2):"/account"===e&&i(3)}),[]);Object(c.useEffect)((function(){d(r.location.pathname)}),[d,r.location.pathname]);var u=[{label:"Home",icon:Object(a.jsx)(w.b,{size:20,style:0===n?{color:"rgba(46, 101, 253, 1)",marginRight:"20px"}:{marginRight:"20px",color:"gray"}}),url:"/home",index:0},{label:"Sites",icon:Object(a.jsx)(w.f,{size:20,style:1===n?{color:"rgba(46, 101, 253, 1)",marginRight:"20px"}:{marginRight:"20px",color:"gray"}}),url:"/sites",index:1},{label:"Users",icon:Object(a.jsx)(w.c,{size:20,style:2===n?{color:"rgba(46, 101, 253, 1)",marginRight:"20px"}:{marginRight:"20px",color:"gray"}}),url:"/users",index:2},{label:"Account",icon:Object(a.jsx)(w.d,{size:20,style:3===n?{color:"rgba(46, 101, 253, 1)",marginRight:"20px"}:{marginRight:"20px",color:"gray"}}),url:"/account",index:3}];return Object(a.jsxs)("div",{className:B.a.Sidebar,children:[Object(a.jsx)("div",{className:B.a.LogoContainer,children:Object(a.jsx)("img",{className:B.a.Logo,src:k,alt:"logo"})}),Object(a.jsx)("div",{className:B.a.ItemsContainer,children:u.map((function(e){var t=e.index===n,c="".concat(B.a.ItemDiv),o="".concat(B.a.Text);return t&&(c="".concat(B.a.ItemDiv," ").concat(B.a.Selected),o="".concat(B.a.Text," ").concat(B.a.TextSelected)),Object(a.jsxs)("div",{className:c,onClick:function(){return function(e){i(u.indexOf(e)),r.replace("".concat(e.url))}(e)},children:[Object(a.jsx)("div",{className:B.a.activeBar,hidden:!t}),e.icon,Object(a.jsx)("div",{className:B.a.TextDiv,children:Object(a.jsx)("span",{className:o,children:e.label})})]},e.label)}))}),Object(a.jsx)("div",{className:B.a.Logout,children:Object(a.jsxs)("a",{href:"/login",children:[" ",Object(a.jsx)("span",{className:B.a.LogoutText,onClick:function(){o((function(e){m.signOut().then((function(){e({type:p})}))}))},children:"Logout"})]})})]})},y=n(163),A=n.n(y),D=function(e){return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(T,{}),Object(a.jsx)("main",{className:A.a.Main,children:e.children})]})},L=n(39),P=n(5),E=n(30),M=n.n(E),R=n(73),z=n.n(R),G=function(e){var t="".concat(z.a.Input);return!1===e.valid&&e.text.length>0&&(t="".concat(z.a.Input," ").concat(z.a.NotValid)),Object(a.jsx)("input",{className:t,value:e.text,type:e.type,placeholder:e.placeholder,onChange:function(t){return e.onChange(t,e.id)},style:e.height?{height:e.height}:null})},U=n(49),F=n.n(U),H=function(e){var t=Object(l.c)((function(e){return e.auth.errorMSG})),n=Object(l.c)((function(e){return e.auth.isLoading})),r=Object(c.useState)({email:{text:"",valid:!1},password:{text:"",valid:!1}}),o=Object(s.a)(r,2),d=o[0],h=o[1],b=Object(l.b)();Object(c.useEffect)((function(){b(C())}),[b]);var x,p=function(e,t){var n=e.target.value,a=n.length>0;h(Object(P.a)(Object(P.a)({},d),{},Object(L.a)({},t,{text:n,valid:a})))};return x=d.email.valid&&d.password.valid?"".concat(M.a.Button):"".concat(M.a.ButtonNotActive),Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)("div",{className:M.a.Login,children:[Object(a.jsx)("h2",{children:"Login"}),Object(a.jsxs)("div",{className:M.a.Form,children:[Object(a.jsx)(G,{type:"email",placeholder:"Email Address",id:"email",onChange:p,text:d.email.text}),Object(a.jsx)(G,{type:"password",placeholder:"Password",id:"password",onChange:p,text:d.password.text})]}),Object(a.jsxs)("div",{className:M.a.ButtonContainer,children:[Object(a.jsx)("button",{className:x,onClick:function(){var e,t;d.email.valid&&d.password.valid&&b((e=d.email.text,t=d.password.text,function(){var n=Object(j.a)(u.a.mark((function n(a){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(C()),a(S(!0)),n.prev=2,n.next=5,m.signInWithEmailAndPassword(e,t).then((function(){var e=m.currentUser.uid,t=m.currentUser.email,n=m.currentUser.displayName,c=m.currentUser.metadata.creationTime;a({type:O,uid:e,name:n,email:t,creationDate:c}),a(S(!1))}));case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),a(C(n.t0));case 10:case"end":return n.stop()}}),n,null,[[2,7]])})));return function(e){return n.apply(this,arguments)}}()))},children:"Login"}),Object(a.jsxs)("span",{className:M.a.Text,children:["Don't have an account? ",Object(a.jsx)("span",{onClick:function(){e.history.replace("/signup")},className:M.a.TextButton,children:"Signup"})]})]})]}),t&&Object(a.jsx)("div",{className:M.a.Error,children:Object(a.jsx)("span",{children:t})}),n&&Object(a.jsx)("div",{className:M.a.LoaderContainer,children:Object(a.jsx)(F.a,{type:"TailSpin",color:"rgba(46, 101, 253, 1)",height:100,width:100})})]})},Q=n(31),V=n.n(Q),W=n(164),q=function(e){var t=Object(l.c)((function(e){return e.auth.errorMSG})),n=Object(l.c)((function(e){return e.auth.isLoading})),r=Object(c.useState)({name:{valid:!1,text:""},email:{valid:!1,text:""},password:{valid:!1,text:""},passwordc:{valid:!1,text:""}}),o=Object(s.a)(r,2),d=o[0],h=o[1],O=Object(l.b)();Object(c.useEffect)((function(){O(C())}),[O]);var p,_=function(e,t){var n=e.target.value,a=function(e,t){return"name"===t?e.length>5:"email"===t?W.validate(e):"password"===t?e.length>7:"passwordc"===t?e===d.password.text:void 0}(n,t);h(Object(P.a)(Object(P.a)({},d),{},Object(L.a)({},t,{valid:a,text:n})))};return p=d.name.valid&&d.email.valid&&d.password.valid&&d.passwordc.valid?"".concat(V.a.Button):"".concat(V.a.ButtonNotActive),Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)("div",{className:V.a.Signup,children:[Object(a.jsx)("h2",{children:"Sign Up"}),Object(a.jsxs)("div",{className:V.a.Form,children:[Object(a.jsx)(G,{type:"text",placeholder:"Organization Name",onChange:_,id:"name",text:d.name.text,valid:d.name.valid}),Object(a.jsx)(G,{type:"email",placeholder:"Email",onChange:_,id:"email",text:d.email.text,valid:d.email.valid}),Object(a.jsx)(G,{type:"password",placeholder:"Password",onChange:_,id:"password",text:d.password.text,valid:d.password.valid}),Object(a.jsx)(G,{type:"password",placeholder:"Confirm Password",onChange:_,id:"passwordc",text:d.passwordc.text,valid:d.passwordc.valid})]}),Object(a.jsxs)("div",{className:V.a.ButtonContainer,children:[Object(a.jsx)("button",{className:p,onClick:function(){var e,t,n;d.name.valid&&d.email.valid&&d.password.valid&&d.passwordc.valid&&O((e=d.email.text,t=d.password.text,n=d.name.text,function(){var a=Object(j.a)(u.a.mark((function a(c){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c(C()),c(S(!0)),n=n.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})),e=e.toLowerCase(),a.next=6,m.createUserWithEmailAndPassword(e,t).then((function(t){var a=t.user.uid,i=t.user.metadata.creationTime;t.user.updateProfile({displayName:n}),c({type:x,uid:a,name:n,email:e,creationDate:i}),c(S(!1)),b.collection("organizations").doc(a).set({email:e,accountCreationDate:i,paymentMethod:null})})).catch((function(e){c(C(e))}));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()))},children:"Signup"}),Object(a.jsxs)("span",{className:V.a.Text,children:["Already have an account? ",Object(a.jsx)("span",{onClick:function(){e.history.replace("/login")},className:V.a.TextButton,children:"Login"})]})]})]}),t&&Object(a.jsx)("div",{className:V.a.Error,children:Object(a.jsx)("span",{children:t})}),n&&Object(a.jsx)("div",{className:V.a.LoaderContainer,children:Object(a.jsx)(F.a,{type:"TailSpin",color:"rgba(46, 101, 253, 1)",height:100,width:100})})]})},J=n(172),X=n(50),Y=function e(t,n,a,c,i,r){Object(X.a)(this,e),this.name=t,this.code=n,this.lastCheckIn=a,this.createdAt=c,this.checkInCount=i,this.id=r},Z=n(26),K=n.n(Z),$=function(e){if(!e)return!0;var t=new Date,n=new Date(t.getTime()-6e4*t.getTimezoneOffset()).toISOString().replace(/T.*/,"").split("-").reverse().join("-");return new Date(e.toDate().getTime()-6e4*e.toDate().getTimezoneOffset()).toISOString().replace(/T.*/,"").split("-").reverse().join("-")===n},ee="FETCH_SITES",te="UPLOADING",ne="FETCHING",ae="ERROR",ce=function(){return function(){var e=Object(j.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(oe(!0)),b.collection("locations").where("ownerId","==",n().auth.uid).orderBy("createdAt","desc").get().then((function(e){var n=[];e.forEach((function(e){var t=0;$(e.data().lastCheckIn)&&(t=e.data().dailyCount),n.push(new Y(e.data().name,e.data().code,e.data().lastCheckIn?K()(e.data().lastCheckIn.toDate()):"-",K()(e.data().createdAt.toDate()),t,e.id))})),t({type:ee,sites:n}),t(oe(!1))})).catch((function(e){return t(re(e))}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},ie=function(e){return function(t){t({type:te,isUploading:e})}},re=function(e){return function(t){t({type:ae,errorMSG:e.toString()})}},oe=function(e){return function(t){t({type:ne,isFetching:e})}},se=n(74),le=n.n(se),de=n(75),ue=n.n(de),je=function(e){return Object(a.jsxs)("div",{className:ue.a.Square,children:[Object(a.jsx)("h5",{children:e.title}),Object(a.jsx)("div",{className:e.amount?ue.a.Circle:ue.a.CircleText,children:e.amount?e.amount:e.text})]})},he=n(40),be=n.n(he),me=function(e){return Object(a.jsxs)("div",{className:e.styles?e.styles:be.a.Panel,children:[Object(a.jsxs)("div",{className:be.a.Header,children:[Object(a.jsx)("div",{className:be.a.LabelContainerTitle,children:Object(a.jsx)("h2",{className:be.a.Title,children:e.title})}),e.labels.map((function(e){return Object(a.jsx)("div",{className:be.a.LabelContainer,children:Object(a.jsx)("h4",{className:be.a.Label,children:e})},e)}))]}),Object(a.jsx)("div",{className:be.a.Divider}),e.children]})},Oe=n(53),xe=n.n(Oe),pe=function(e){var t=xe.a.Item;return e.onClick&&(t="".concat(xe.a.Item," ").concat(xe.a.Pressable)),Object(a.jsxs)("div",{onClick:e.onClick,className:t,children:[Object(a.jsx)("div",{className:xe.a.LabelContainerTitle,children:Object(a.jsx)("h3",{children:e.title})}),e.itemArr.map((function(e){return Object(a.jsx)("div",{className:xe.a.LabelContainer,children:Object(a.jsx)("span",{children:e})},Math.random())}))]})},_e=function(e){var t=Object(l.c)((function(e){return e.auth.name})),n=Object(l.c)((function(e){return e.sites.sites})),i=Object(c.useState)({checkIns:0,scanPerSite:0,totalSites:0,lastCheckIn:"-",topSites:[],loaded:!1}),r=Object(s.a)(i,2),o=r[0],d=r[1],u=Object(l.b)();Object(c.useEffect)((function(){if(n){if(n&&!o.loaded){var e,t=n.length,a=0;n.forEach((function(t){a+=t.checkInCount,(!e||new Date(t.lastCheckIn)>new Date(e))&&"-"!==t.lastCheckIn&&(e=t.lastCheckIn)}));var c=Object(J.a)(n).sort((function(e,t){return e.checkInCount>t.checkInCount?-1:1})),i=Math.round(a/t);isNaN(i)&&(i=0),d(Object(P.a)(Object(P.a)({},o),{},{checkIns:a,totalSites:t.toString(),scanPerSite:i,topSites:c,lastCheckIn:e||"-",loaded:!0}))}}else u(ce())}),[n,u,o]);var j=1;return Object(a.jsxs)("div",{className:le.a.Home,children:[Object(a.jsx)("h2",{children:t||"...Loading"}),Object(a.jsxs)("div",{className:le.a.TopContainer,children:[Object(a.jsx)(je,{title:"Check-ins today",amount:o.checkIns.toString()}),Object(a.jsx)(je,{title:"Avg. Scan Per Site",amount:o.scanPerSite.toString()}),Object(a.jsx)(je,{title:"Total Sites",amount:o.totalSites.toString()}),Object(a.jsx)(je,{title:"Last Check-in",text:o.lastCheckIn})]}),Object(a.jsx)(me,{title:"Most Visited",data:o.topSites,labels:["Code","Check-ins today","Rank"],styles:le.a.Panel,children:o.topSites.map((function(e){var t=[e.code,e.checkInCount,j];return++j<=6?Object(a.jsx)(pe,{title:e.name,itemArr:t},Math.random()):null}))})]})},fe=n(104),ve=n.n(fe),ge=function(e){var t="".concat(ve.a.Button);return!1===e.formValid&&(t="".concat(ve.a.ButtonNotValid)),Object(a.jsx)("button",{onClick:e.onClick,className:t,children:e.children})},Ce=n(32),Se=n.n(Ce),Ne=n(165),ke=n.n(Ne),Ie=function(e){return e.show?Object(a.jsx)("div",{className:ke.a.Backdrop,onClick:e.clicked}):null},Be=n(64),we=n.n(Be),Te=n(166),ye=n.n(Te),Ae=function(e){var t=Object(c.useState)("000000"),n=Object(s.a)(t,2),r=n[0],o=n[1],d=Object(c.useState)(!1),m=Object(s.a)(d,2),O=m[0],x=m[1],p=Object(l.c)((function(e){return e.sites.uploading})),_=Object(l.c)((function(e){return e.sites.errorMSG})),f=Object(c.useState)({name:{text:"",valid:!1}}),v=Object(s.a)(f,2),g=v[0],C=v[1],S=Object(l.b)(),N=Object(c.useCallback)(function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b.collection("locations").where("code","==",t),e.next=3,a.get().then((function(e){n=0===e.size}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),k=Object(c.useCallback)((function(){var e=ye.a.generate(8);N(e).then((function(t){t?o(e):k()}))}),[N]);Object(c.useEffect)((function(){k()}),[k]);Object(c.useEffect)((function(){!p&&O&&(e.refetch(),x(!1),e.closeModal(),C({name:{text:"",valid:!1}}),k())}),[p,k,e,O]);return _&&console.log(_),Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(Ie,{show:e.show,clicked:e.modalClosed}),Object(a.jsx)("div",{className:Se.a.AddModal,style:{transform:e.show?"translateY(0)":"translateY(-100vh)",opacity:e.show?"1":"0"},children:p?Object(a.jsx)("div",{style:{marginTop:150},children:Object(a.jsx)(F.a,{type:"TailSpin",color:"rgba(46, 101, 253, 1)",height:100,width:100})}):Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)("div",{className:Se.a.TopContainer,children:[Object(a.jsxs)("div",{className:Se.a.Form,children:[Object(a.jsx)("h4",{children:"Site Name"}),Object(a.jsx)(G,{id:"name",text:g.name.text,onChange:function(e,t){var n=e.target.value,a=n.length>3;C(Object(P.a)(Object(P.a)({},g),{},Object(L.a)({},t,{valid:a,text:n})))},placeholder:"Ex. Library",height:"35px"}),Object(a.jsx)("div",{className:Se.a.Divider}),Object(a.jsx)("h4",{children:"Code"}),Object(a.jsx)("span",{className:Se.a.CodeText,children:r})]}),Object(a.jsx)("div",{className:Se.a.QR,children:Object(a.jsx)("div",{className:Se.a.QRContainer,children:Object(a.jsx)(we.a,{value:r,size:180,fgColor:"rgba(46, 101, 253, 1)"})})})]}),Object(a.jsxs)("div",{className:Se.a.BottomContainer,children:[Object(a.jsx)("span",{onClick:e.closeModal,className:Se.a.Span,children:"Cancel"}),Object(a.jsx)(ge,{formValid:g.name.valid,onClick:function(){g.name.valid&&(S(function(e,t){return function(){var n=Object(j.a)(u.a.mark((function n(a,c){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a(ie(!0)),b.collection("locations").add({code:e,name:t,ownerId:c().auth.uid,lastCheckIn:null,createdAt:h.a.firestore.FieldValue.serverTimestamp(),dailyCount:0}).then((function(){a(ie(!1))})).catch((function(e){a(re(e))}));case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}(r,g.name.text)),x(!0))},children:"Add"})]})]})})]})},De=n(76),Le=n.n(De),Pe=["Code","Last check-in","Created"],Ee=function(e){var t=Object(c.useState)(!1),n=Object(s.a)(t,2),r=n[0],o=n[1],d=Object(l.c)((function(e){return e.sites.sites})),u=Object(l.b)(),j=Object(c.useCallback)((function(){u(ce())}),[u]);Object(c.useEffect)((function(){d||j()}),[d,j]);var h=function(t){e.history.push("sites/".concat(t))};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{className:Le.a.ModalDiv,children:Object(a.jsx)(Ae,{refetch:j,closeModal:function(){return o(!1)},show:r})}),Object(a.jsxs)("div",{className:Le.a.Sites,children:[Object(a.jsx)("div",{className:Le.a.ButtonContainer,children:Object(a.jsx)(ge,{onClick:function(){return o(!0)},children:"Add"})}),Object(a.jsx)(me,{onClick:h,title:"Sites",labels:Pe,data:d,children:d&&d.map((function(e){var t=[e.code,e.lastCheckIn,e.createdAt];return Object(a.jsx)(pe,{title:e.name,itemArr:t,onClick:function(){return h(e.code)}},Math.random())}))})]})]})},Me=n(41),Re=n.n(Me),ze=n(51),Ge=n.n(ze),Ue=n(77),Fe=n.n(Ue),He=function(e){return Object(a.jsxs)("div",{className:Fe.a.Panel,children:[Object(a.jsx)("h4",{children:"Name"}),Object(a.jsx)("span",{className:Fe.a.CodeText,children:e.name}),Object(a.jsx)("h4",{children:"Code"}),Object(a.jsx)("span",{className:Fe.a.CodeText,children:e.code})]})},Qe=n(33),Ve=n.n(Qe),We=n(167),qe=function(e){var t=function(){var t=Object(j.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(We.printComponent)(Object(a.jsxs)("div",{className:Ve.a.Print,children:[Object(a.jsx)("h1",{className:Ve.a.PrintH1,children:"Scan with phone to check in"}),Object(a.jsx)(we.a,{value:e.code,size:500,fgColor:"rgba(46, 101, 253, 1)"}),Object(a.jsx)("span",{className:Ve.a.CodePrintText,children:e.code}),Object(a.jsxs)("div",{className:Ve.a.BottomContainer,children:[Object(a.jsx)("img",{className:Ve.a.Logo,src:k,alt:"logo"}),Object(a.jsx)("span",{children:"ClickAttend"})]})]}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:Ve.a.Panel,children:[Object(a.jsx)("div",{children:Object(a.jsx)(we.a,{value:e.code,size:180,fgColor:"rgba(46, 101, 253, 1)"})}),Object(a.jsxs)("div",{className:Ve.a.ButtonsContainer,children:[Object(a.jsx)("button",{className:Ve.a.Button,onClick:t,children:"Print"}),Object(a.jsx)("button",{className:Ve.a.Button,children:"Save"})]})]})},Je=n(105),Xe=n.n(Je),Ye=function(e){return Object(a.jsxs)("div",{className:Xe.a.SearchBar,children:[Object(a.jsx)(w.e,{color:"rgba(46, 101, 253, 1)",size:20,style:{marginRight:"10px"}}),Object(a.jsx)("input",{className:Xe.a.Input,placeholder:"Search People"})]})},Ze=n(78),Ke=n.n(Ze),$e=function(e){return Object(a.jsxs)("div",{className:Ke.a.Panel,children:[Object(a.jsx)("h1",{className:Ke.a.H1,children:e.count}),Object(a.jsx)("span",{className:Ke.a.text,children:"Check-ins today"})]})},et=function e(t,n,a,c,i){Object(X.a)(this,e),this.name=t,this.email=n,this.phoneNumber=a,this.checkedInAt=c,this.id=i},tt=function(e){var t=Object(c.useState)(""),n=Object(s.a)(t,2),i=n[0],r=n[1],o=Object(c.useState)([]),d=Object(s.a)(o,2),u=d[0],j=d[1],h=Object(c.useState)(0),m=Object(s.a)(h,2),O=m[0],x=m[1],p=Object(c.useState)(null),_=Object(s.a)(p,2),f=_[0],v=_[1],g=Object(c.useState)(null),C=Object(s.a)(g,2),S=C[0],N=C[1],k=e.history.location.pathname.split("sites/")[1],I=Object(l.c)((function(e){return e.auth.uid})),B=Object(c.useCallback)((function(){b.collection("checkIns").where("code","==",k).where("ownerId","==",I).orderBy("checkedInAt","desc").limit(25).get().then((function(e){var t=[];e.forEach((function(e){t.push(new et(e.data().name,e.data().email,e.data().phoneNumber,K()(e.data().checkedInAt.toDate()),K()(e.data().checkedInAt.toDate())))})),j(t),e.size<25?N(null):N(e.docs[e.size-1])}))}),[k,I]),T=Object(c.useCallback)((function(t){b.collection("locations").where("code","==",t).where("ownerId","==",I).get().then((function(t){0!==t.size?(B(),t.forEach((function(e){r(e.data().name),v(e.id),$(e.data().lastCheckIn)&&x(e.data().dailyCount)}))):e.history.replace("/sites")}))}),[I,e.history,B]);Object(c.useEffect)((function(){T(k)}),[T,k]);return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:Re.a.TopContainer,children:[Object(a.jsxs)("div",{onClick:function(){return e.history.goBack()},className:Re.a.GoBack,children:[Object(a.jsx)(w.a,{color:"rgba(46, 101, 253, 1)",size:30,style:{marginRight:"15px"}}),Object(a.jsx)("h2",{children:"Go Back"})]}),Object(a.jsx)("span",{className:Re.a.Delete,onClick:function(){f&&b.collection("locations").doc(f).delete().then((function(){e.history.go(0)}))},children:"Delete"})]}),Object(a.jsxs)("div",{className:Re.a.Panels,children:[Object(a.jsx)(He,{name:i,code:k}),Object(a.jsx)("div",{className:Re.a.Divider}),Object(a.jsx)($e,{count:O}),Object(a.jsx)("div",{className:Re.a.Divider}),Object(a.jsx)(qe,{code:k})]}),Object(a.jsx)("div",{className:Re.a.SearchBarContainer,children:Object(a.jsx)(Ye,{})}),Object(a.jsx)(me,{title:"Check-ins",labels:["Email","Phone","Date"],data:u,children:Object(a.jsx)(Ge.a,{pageStart:0,loadMore:function(){S&&(console.log("ran"),b.collection("checkIns").where("code","==",k).where("ownerId","==",I).orderBy("checkedInAt","desc").startAfter(S).limit(25).get().then((function(e){var t=u;e.forEach((function(e){t.push(new et(e.data().name,e.data().email,e.data().phoneNumber,K()(e.data().checkedInAt.toDate()),K()(e.data().checkedInAt.toDate())))})),j(t),console.log(t.length),e.size<25?N(null):N(e.docs[e.size-1])})))},hasMore:!0,useWindow:!0,threshold:0,children:u.map((function(e){var t=[e.email,e.phoneNumber,e.checkedInAt];return Object(a.jsx)(pe,{title:e.name,itemArr:t,onClick:function(){}},Math.random())}))})})]})},nt=n(168),at=n.n(nt),ct=["Email","Phone","ID"],it=function(e){var t=Object(l.c)((function(e){return e.auth.uid})),n=Object(c.useState)([]),i=Object(s.a)(n,2),r=i[0],o=i[1],d=Object(c.useState)(null),u=Object(s.a)(d,2),j=u[0],h=u[1],m=Object(c.useCallback)((function(){b.collection("organizations/".concat(t,"/users")).where("name",">=","A").limit(25).get().then((function(e){var t=[];e.forEach((function(e){t.push(new et(e.data().name,e.data().email,e.data().phoneNumber,null,e.data().userId))})),o(t),e.size<25?h(null):h(e.docs[e.size-1])}))}),[t]);Object(c.useEffect)((function(){m()}),[m]);var O=function(t){e.history.push("users/".concat(t))};return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:at.a.SearchBarContainer,children:Object(a.jsx)(Ye,{})}),Object(a.jsx)(me,{onClick:O,title:"Users",labels:ct,children:Object(a.jsx)(Ge.a,{pageStart:0,loadMore:function(){j&&b.collection("organizations/".concat(t,"/users")).startAfter(j).limit(25).get().then((function(e){var t=r;e.forEach((function(e){t.push(new et(e.data().name,e.data().email,e.data().phoneNumber))})),o(t),e.size<25?h(null):h(e.docs[e.size-1])}))},hasMore:!0,useWindow:!0,threshold:0,children:r.map((function(e){var t=[e.email,e.phoneNumber,e.id];return Object(a.jsx)(pe,{title:e.name,itemArr:t,onClick:function(){return O(e.id)}},Math.random())}))})})]})},rt=n(36),ot=n.n(rt),st=function(){var e,t=Object(l.c)((function(e){return e.auth})),n=Object(c.useState)(t.name),i=Object(s.a)(n,2),r=i[0],o=i[1],d=Object(l.b)();e=t.name===r||r.length<6?"".concat(ot.a.NotActive):"".concat(ot.a.SaveButton);return Object(a.jsxs)("div",{className:ot.a.Account,children:[Object(a.jsxs)("div",{className:ot.a.TopContainer,children:[Object(a.jsx)("h2",{className:ot.a.Title,children:"Account Info"}),Object(a.jsx)("button",{onClick:function(){r!==t.name&&r.length>5&&m.currentUser.updateProfile({displayName:r}).then((function(){var e;d((e=r,function(t){t({type:f,name:e})}))}))},className:e,children:"Save"})]}),Object(a.jsx)("div",{className:ot.a.Divider}),Object(a.jsx)("h4",{children:"Organization Name"}),Object(a.jsx)(G,{onChange:function(e){var t=e.target.value;o(t)},text:r}),Object(a.jsx)("h4",{children:"Email"}),Object(a.jsx)("span",{className:ot.a.Span,children:t.email}),Object(a.jsx)("h4",{children:"Date Joined"}),Object(a.jsx)("span",{className:ot.a.Span,children:t.creationDate}),Object(a.jsx)("h4",{children:"Last Billed"}),Object(a.jsx)("span",{children:"N/A"}),Object(a.jsx)("h4",{children:"Next Billing Cycle"}),Object(a.jsx)("span",{children:"N/A"})]})},lt=function e(t,n,a,c){Object(X.a)(this,e),this.name=n,this.siteCode=a,this.checkedInAt=t,this.id=c},dt=n(169),ut=n.n(dt),jt=n(34),ht=n.n(jt),bt=function(e){return Object(a.jsxs)("div",{className:ht.a.UserBar,children:[Object(a.jsx)("div",{className:ht.a.ItemDiv,children:Object(a.jsxs)("span",{children:["Name: ",Object(a.jsx)("span",{className:ht.a.InfoText,children:e.user.name})]})}),Object(a.jsx)("div",{className:ht.a.Divider}),Object(a.jsx)("div",{className:ht.a.ItemDiv,children:Object(a.jsxs)("span",{children:["Phone: ",Object(a.jsx)("span",{className:ht.a.InfoText,children:e.user.phoneNumber})]})}),Object(a.jsx)("div",{className:ht.a.Divider}),Object(a.jsx)("div",{className:ht.a.ItemDiv,children:Object(a.jsxs)("span",{children:["Email: ",Object(a.jsx)("span",{className:ht.a.InfoText,children:e.user.email})]})})]})},mt=function(e){var t=e.history.location.pathname.split("/users/")[1],n=Object(l.c)((function(e){return e.auth.uid})),i=Object(c.useState)(null),r=Object(s.a)(i,2),o=r[0],d=r[1],u=Object(c.useState)([]),j=Object(s.a)(u,2),h=j[0],m=j[1],O=Object(c.useState)({name:null,email:null,phoneNumber:null,id:null}),x=Object(s.a)(O,2),p=x[0],_=x[1],f=Object(c.useCallback)((function(){b.collection("checkIns").where("userId","==",t).where("ownerId","==",n).orderBy("checkedInAt","desc").limit(25).get().then((function(e){var n=[],a=!0;e.forEach((function(e){a&&(_({name:e.data().name,email:e.data().email,phoneNumber:e.data().phoneNumber,id:t}),a=!1),n.push(new lt(K()(e.data().checkedInAt.toDate()),e.data().siteName,e.data().code,e.data().checkedInAt.toDate().toString()))})),m(n),e.size<25?d(null):d(e.docs[e.size-1])}))}),[n,t]);return Object(c.useEffect)((function(){f()}),[f]),Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{onClick:function(){return e.history.goBack()},className:ut.a.GoBack,children:[Object(a.jsx)(w.a,{color:"rgba(46, 101, 253, 1)",size:30,style:{marginRight:"15px"}}),Object(a.jsx)("h2",{children:"Go Back"})]}),Object(a.jsx)(bt,{user:p}),Object(a.jsx)(me,{onClick:function(){},title:"Check-ins",labels:["Site Code","Date"],data:h,children:Object(a.jsx)(Ge.a,{pageStart:0,loadMore:function(){o&&b.collection("checkIns").where("userId","==",t).where("ownerId","==",n).orderBy("checkedInAt","desc").startAfter(o).limit(25).get().then((function(e){var t=h;e.forEach((function(e){t.push(new lt(K()(e.data().checkedInAt.toDate()),e.data().siteName,e.data().code,e.data().checkedInAt.toDate().toString()))})),m(t),e.size<25?d(null):d(e.docs[e.size-1])}))},hasMore:!0,useWindow:!0,threshold:0,children:h.map((function(e){var t=[e.siteCode,e.checkedInAt];return Object(a.jsx)(pe,{title:e.name,itemArr:t,onClick:function(){}},Math.random())}))})})]})};var Ot=function(){var e,t=Object(c.useState)(null),n=Object(s.a)(t,2),r=n[0],o=n[1],d=Object(l.b)();return Object(c.useEffect)((function(){m.onAuthStateChanged((function(e){var t;e?(d((t=e,function(e){var n=t.displayName,a=t.email,c=t.uid,i=t.metadata.creationTime;e({type:_,name:n,email:a,uid:c,creationDate:i})})),o(!0)):o(!1)}))})),r?e=Object(a.jsx)(D,{children:Object(a.jsxs)(N.d,{children:[Object(a.jsx)(N.b,{exact:!0,path:"/home",component:_e}),Object(a.jsx)(N.b,{exact:!0,path:"/sites",component:Ee}),Object(a.jsx)(N.b,{exact:!0,path:"/sites/:id",component:tt}),Object(a.jsx)(N.b,{exact:!0,path:"/users",component:it}),Object(a.jsx)(N.b,{exact:!0,path:"/users/:id",component:mt}),Object(a.jsx)(N.b,{exact:!0,path:"/account",component:st}),Object(a.jsx)(N.a,{to:"/home"})]})}):!1===r&&(e=Object(a.jsxs)(N.d,{children:[Object(a.jsx)(N.b,{exact:!0,path:"/login",component:H}),Object(a.jsx)(N.b,{exact:!0,path:"/signup",component:q}),Object(a.jsx)(N.a,{to:"/login"})]})),Object(a.jsx)(i.a.Fragment,{children:e})},xt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,319)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))},pt=n(71),_t=n(43),ft=n(170),vt={name:null,uid:null,email:null,creationDate:null,isLoading:!1,errorMSG:null},gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:case x:return Object(P.a)(Object(P.a)({},e),{},{name:t.name,email:t.email,uid:t.uid,creationDate:t.creationDate});case p:return Object(P.a)(Object(P.a)({},e),{},{name:null,email:null,uid:null,creationDate:null});case _:return t.name?Object(P.a)(Object(P.a)({},e),{},{name:t.name,email:t.email,uid:t.uid,creationDate:t.creationDate}):Object(P.a)(Object(P.a)({},e),{},{email:t.email,uid:t.uid,creationDate:t.creationDate});case f:return Object(P.a)(Object(P.a)({},e),{},{name:t.name});case g:return Object(P.a)(Object(P.a)({},e),{},{isLoading:t.isLoading});case v:return Object(P.a)(Object(P.a)({},e),{},{errorMSG:t.errorMSG,isLoading:!1});default:return e}},Ct={sites:null,loading:!1,uploading:!1,errorMSG:null,fetching:!1},St=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return Object(P.a)(Object(P.a)({},e),{},{sites:t.sites});case te:return Object(P.a)(Object(P.a)({},e),{},{uploading:t.isUploading});case ne:return Object(P.a)(Object(P.a)({},e),{},{fetching:t.isFetching});case ae:return Object(P.a)(Object(P.a)({},e),{},{errorMSG:t.errorMSG});case p:return{sites:null,loading:!1,uploading:!1,errorMSG:null,fetching:!1};default:return e}},Nt=n(171),kt=Object(_t.combineReducers)({auth:gt,sites:St}),It=Object(_t.createStore)(kt,Object(Nt.composeWithDevTools)(Object(_t.applyMiddleware)(ft.a)));o.a.render(Object(a.jsx)(l.a,{store:It,children:Object(a.jsx)(pt.a,{children:Object(a.jsx)(Ot,{})})}),document.getElementById("root")),xt()},32:function(e,t,n){e.exports={AddModal:"AddModal_AddModal__3PIQu",TopContainer:"AddModal_TopContainer__2Dmxw",Form:"AddModal_Form__3jgJ0",CodeText:"AddModal_CodeText__E_Mn8",Divider:"AddModal_Divider__5EzhI",QRContainer:"AddModal_QRContainer__3_qfO",BottomContainer:"AddModal_BottomContainer__u5QKn",Span:"AddModal_Span__2jDYq"}},33:function(e,t,n){e.exports={Panel:"QRPanel_Panel__IuH8p",ButtonsContainer:"QRPanel_ButtonsContainer__2j_xZ",Button:"QRPanel_Button__3hUlc",Print:"QRPanel_Print__2bTFr",CodePrintText:"QRPanel_CodePrintText__mUeBs",PrintH1:"QRPanel_PrintH1__1lJf0",BottomContainer:"QRPanel_BottomContainer__3-WqG",Logo:"QRPanel_Logo__yhKXa"}},34:function(e,t,n){e.exports={UserBar:"UserBar_UserBar__cTlec",ItemDiv:"UserBar_ItemDiv__aiB_t",InfoText:"UserBar_InfoText__2nlR0",Divider:"UserBar_Divider__5Gly-"}},36:function(e,t,n){e.exports={Account:"Account_Account__FFTVV",Title:"Account_Title__3i6Q_",SaveButton:"Account_SaveButton__38RRz",NotActive:"Account_NotActive__2RSQp",TopContainer:"Account_TopContainer__aYNL-"}},40:function(e,t,n){e.exports={Panel:"Panel_Panel__2SL-f",Header:"Panel_Header__cb_ut",Label:"Panel_Label__3IAOs",Title:"Panel_Title__aF-kK",Divider:"Panel_Divider__2BB9Y",LabelContainer:"Panel_LabelContainer__5YQc9",LabelContainerTitle:"Panel_LabelContainerTitle__3GkX3"}},41:function(e,t,n){e.exports={Edit:"EditSite_Edit__25ixu",TopContainer:"EditSite_TopContainer__2KTpC",GoBack:"EditSite_GoBack__3RRT_",Delete:"EditSite_Delete__1Z7WZ",Panels:"EditSite_Panels__fRs8v",Divider:"EditSite_Divider__103X6",SearchBarContainer:"EditSite_SearchBarContainer__kQJ5x",Loader:"EditSite_Loader__1N3gD"}},53:function(e,t,n){e.exports={Item:"Item_Item__2EMbE",LabelContainer:"Item_LabelContainer__tC-9k",LabelContainerTitle:"Item_LabelContainerTitle__3SGsg",Pressable:"Item_Pressable__2LzRS"}},73:function(e,t,n){e.exports={Input:"Input_Input__1ewUE",NotValid:"Input_NotValid__3Sr5A"}},74:function(e,t,n){e.exports={Home:"Home_Home__20ZW1",TopContainer:"Home_TopContainer__LNUJG",Panel:"Home_Panel__2Ogm3"}},75:function(e,t,n){e.exports={Square:"Square_Square__1i6r4",Circle:"Square_Circle__1Eb-c",CircleText:"Square_CircleText__2WcA2"}},76:function(e,t,n){e.exports={Sites:"Sites_Sites__26V7r",ButtonContainer:"Sites_ButtonContainer__aoIhi",ModalDiv:"Sites_ModalDiv__Xqokz"}},77:function(e,t,n){e.exports={Panel:"InfoPanel_Panel__2g7p5",CodeText:"InfoPanel_CodeText__28sJX"}},78:function(e,t,n){e.exports={Panel:"ChartPanel_Panel__1IUAO"}}},[[318,1,2]]]);
//# sourceMappingURL=main.670a2904.chunk.js.map